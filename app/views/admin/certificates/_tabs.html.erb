<%# ============================================ %>
<%#  TAB NAVIGATION BAR                         %>
<%#  Uses Turbo Frames for seamless navigation  %>
<%# ============================================ %>

<div class="mb-6 bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden">
  <nav class="flex border-b border-gray-200" role="tablist">
    
    <%= link_to overview_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="layout-dashboard" class="w-4 h-4"></i>
      <span>Overview</span>
    <% end %>

    <%= link_to dcv_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="key" class="w-4 h-4"></i>
      <span>DCV Verification</span>
    <% end %>

    <%= link_to files_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="file-text" class="w-4 h-4"></i>
      <span>Certificate Files</span>
    <% end %>

    <%= link_to customer_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="user" class="w-4 h-4"></i>
      <span>Customer Info</span>
    <% end %>

    <%= link_to billing_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="credit-card" class="w-4 h-4"></i>
      <span>Billing & Order</span>
    <% end %>

    <%= link_to issue_logs_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="alert-circle" class="w-4 h-4"></i>
      <span>Issue Logs</span>
    <% end %>

    <%= link_to audit_logs_admin_certificate_path(@certificate), 
      data: { turbo_frame: "certificate_tab_content" },
      class: "tab-button flex-1 px-6 py-4 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 border-b-2 border-transparent transition-colors flex items-center justify-center gap-2" do %>
      <i data-lucide="shield-check" class="w-4 h-4"></i>
      <span>Audit Logs</span>
    <% end %>

  </nav>
</div>

<style>
  .tab-button.active {
    color: #2563eb;
    border-bottom-color: #2563eb;
    background-color: #eff6ff;
  }
</style>

<script>
  // Mark active tab based on current URL
  document.addEventListener('turbo:load', function() {
    updateActiveTab();
  });

  document.addEventListener('turbo:frame-load', function() {
    updateActiveTab();
  });

  function updateActiveTab() {
    const currentPath = window.location.pathname;
    
    document.querySelectorAll('.tab-button').forEach(link => {
      link.classList.remove('active');
      if (link.getAttribute('href') === currentPath) {
        link.classList.add('active');
      }
    });
  }
</script>
