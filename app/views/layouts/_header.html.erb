<%# app/views/layouts/_header.html.erb %>
<nav data-controller="menu"
     class="fixed top-0 left-0 w-full z-50 bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg">
  <div class="container mx-auto px-4 max-w-7xl flex items-center justify-between h-16">

    <!-- ë¡œê³  -->
    <%= link_to root_path, class: "flex items-center space-x-2 h-16" do %>
      <span class="text-2xl">ðŸ”’</span>
      <span class="text-xl font-bold">CertGate</span>
    <% end %>

    <!-- ë°ìŠ¤í¬í†± ë©”ë‰´ (md ì´ìƒì—ì„œ í‘œì‹œ) -->
    <div class="hidden md:flex space-x-8 items-center">
      <% nav_items = [
        { href: root_path, label: 'í™ˆ' },
        { href: products_path, label: 'ì¸ì¦ì„œ' },
         { href: "", label: 'ê³ ê°ì§€ì›' },
        { href: faq_path, label: 'FAQ' }
      ] %>

      <% nav_items.each do |item| %>
        <% if item[:href].starts_with?('#') %>
          <a href="<%= item[:href] %>" class="hover:text-indigo-200 transition"><%= item[:label] %></a>
        <% else %>
          <%= link_to item[:label], item[:href], class: "hover:text-indigo-200 transition" %>
        <% end %>
      <% end %>

      <%# ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¼ ë‹¤ë¥´ê²Œ í‘œì‹œ %>
      <% if user_signed_in? %>
        <%= link_to "ë§ˆì´íŽ˜ì´ì§€", edit_user_registration_path, class: "hover:text-indigo-200 transition" %>
        <%= link_to "ë¡œê·¸ì•„ì›ƒ", destroy_user_session_path, data: { turbo_method: :delete }, class: "hover:text-indigo-200 transition" %>
      <% else %>
        <%= link_to "ë¡œê·¸ì¸", new_user_session_path, class: "hover:text-indigo-200 transition" %>
        <%= link_to "íšŒì›ê°€ìž…", new_user_registration_path, class: "hover:text-indigo-200 transition" %>
      <% end %>
    </div>

    <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë²„íŠ¼ (md ë¯¸ë§Œì—ì„œ í‘œì‹œ) -->
    <div class="md:hidden">
      <button
        data-action="click->menu#toggle"
        class="p-2 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-300 transition"
        aria-label="Toggle Menu">
        <svg data-menu-target="openIcon" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16" />
        </svg>
        <svg data-menu-target="closeIcon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>
  </div>

  <!-- ëª¨ë°”ì¼ ë©”ë‰´ (md ë¯¸ë§Œì—ì„œë§Œ í‘œì‹œ) -->
  <div
    data-menu-target="menu"
    class="md:hidden overflow-hidden transition-all duration-500 ease-in-out max-h-0 opacity-0 bg-gradient-to-r from-indigo-600 to-purple-600">
    <div class="flex flex-col space-y-2 p-4 border-t border-indigo-700">
      <% nav_items.each do |item| %>
        <% if item[:href].starts_with?('#') %>
          <a href="<%= item[:href] %>" class="py-2 px-3 rounded-md hover:bg-indigo-700 transition"><%= item[:label] %></a>
        <% else %>
          <%= link_to item[:label], item[:href], class: "py-2 px-3 rounded-md hover:bg-indigo-700 transition" %>
        <% end %>
      <% end %>

      <% if user_signed_in? %>
        <%= link_to "ë§ˆì´íŽ˜ì´ì§€", edit_user_registration_path, class: "py-2 px-3 rounded-md hover:bg-indigo-700 transition" %>
        <%= link_to "ë¡œê·¸ì•„ì›ƒ", destroy_user_session_path, data: { turbo_method: :delete }, class: "py-2 px-3 rounded-md hover:bg-indigo-700 transition" %>
      <% else %>
        <%= link_to "ë¡œê·¸ì¸", new_user_session_path, class: "py-2 px-3 rounded-md hover:bg-indigo-700 transition" %>
        <%= link_to "íšŒì›ê°€ìž…", new_user_registration_path, class: "py-2 px-3 rounded-md hover:bg-indigo-700 transition" %>
      <% end %>
    </div>
  </div>
</nav>